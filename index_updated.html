<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Open in about:blank → Spotify Embed</title>
  <style>
    :root {
      --bg: #0b1220;
      --card: #111a2e;
      --accent: #6ee7ff;
      --accent-2: #a78bfa;
      --text: #e5eef7;
      --muted: #9fb3c8;
      --focus: #ffffff55;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 800px at 10% 10%, #0f1a30 0%, var(--bg) 60%),
                  radial-gradient(1000px 700px at 90% 90%, #0d1530 0%, var(--bg) 60%);
      color: var(--text);
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .card {
      background: linear-gradient(180deg, var(--card), #0f1a28);
      border: 1px solid #20304d;
      border-radius: 18px;
      padding: 40px;
      box-shadow: 0 10px 30px #00000040, inset 0 1px 0 #ffffff0d;
      text-align: center;
      width: min(720px, 94vw);
    }
    h1 { margin: 0 0 14px; letter-spacing: .2px; }
    p { margin: 0 0 20px; color: var(--muted); }
    button {
      appearance: none;
      border: 0;
      padding: 40px 60px;
      border-radius: 20px;
      font-size: 28px;
      font-weight: 800;
      letter-spacing: 0.5px;
      transition: transform .04s ease, box-shadow .2s ease, background .2s ease;
      cursor: pointer;
      background: linear-gradient(180deg, var(--accent), var(--accent-2));
      color: #0b0f1a;
      text-shadow: 0 1px 0 #ffffffc0;
      box-shadow: 0 12px 30px #00000066, inset 0 1px 0 #ffffff1a;
      width: 100%;
      max-width: 560px;
    }
    button:hover { box-shadow: 0 14px 34px #00000080; }
    button:active { transform: translateY(2px); }
    button:focus-visible { outline: 4px solid var(--focus); outline-offset: 3px; }
    .status { margin-top: 16px; font-size: 14px; color: var(--muted); }
    .status a { color: var(--accent); }
  </style>
</head>
<body>
  <div class="card">
    <h1>Open <code>about:blank</code></h1>
    <p>Click the button to open a new <code>about:blank</code> tab that contains a Spotify embed loader. Pop‑ups must be allowed.</p>
    <button id="openBlank" type="button" aria-label="Open in about:blank">Open in about:blank</button>
    <div id="status" class="status" role="status" aria-live="polite"></div>
  </div>

  <script>
    const status = document.getElementById('status');

    function writeSpotifyUI(doc){
      const html = `<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spotify Embed Player</title>
  <style>
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial;background:#0b1220;color:#e5eef7;display:grid;place-items:center;min-height:100vh;padding:20px}
    .card{background:#111a2e;padding:30px;border-radius:18px;max-width:720px;width:100%;box-shadow:0 10px 30px #00000050;text-align:center}
    h1{margin:0 0 20px}
    input{width:100%;padding:12px;font-size:16px;border-radius:10px;border:1px solid #20304d;margin-bottom:16px;background:#0e1728;color:#e5eef7}
    button{padding:14px 20px;font-size:16px;font-weight:700;border-radius:12px;border:none;cursor:pointer;background:linear-gradient(180deg,#6ee7ff,#a78bfa);color:#0b0f1a;margin-bottom:20px;width:100%}
    iframe{border-radius:12px;width:100%;height:380px;border:none}
    .hint{opacity:.75;margin-top:10px;font-size:13px}
  </style>
</head>
<body>
  <div class="card">
    <h1>Spotify Embed Player</h1>
    <input type="text" id="spotifyUrl" placeholder="Paste a Spotify track, album, or playlist URL" />
    <button id="loadBtn">Load Player</button>
    <div id="playerContainer"></div>
    <p class="hint">Tip: Use any link from <code>open.spotify.com</code>. We'll convert it to an embeddable URL.</p>
  </div>
  <script>
    const btn = document.getElementById('loadBtn');
    const urlInput = document.getElementById('spotifyUrl');
    const container = document.getElementById('playerContainer');
    btn.addEventListener('click', ()=>{
      const url = urlInput.value.trim();
      if (!url.startsWith('https://open.spotify.com/')) { container.innerHTML = '<p>Please enter a valid Spotify URL.</p>'; return; }
      const cleanUrl = url.split('?')[0];
      const embedUrl = cleanUrl.replace('open.spotify.com', 'open.spotify.com/embed');
      container.innerHTML = '<iframe src="'+embedUrl+'" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>';
    });
  <\/script>
</body>
</html>`;
      doc.open();
      doc.write(html);
      doc.close();
    }

    document.getElementById('openBlank').addEventListener('click', () => {
      try {
        const w = window.open('about:blank', '_blank', 'noopener,noreferrer');
        if (!w) {
          status.innerHTML = 'Popup was blocked. Please allow pop‑ups, then try again.';
          return;
        }
        try { writeSpotifyUI(w.document); }
        catch(e){ status.textContent = 'Opened about:blank, but could not inject UI.'; }
      } catch (err) {
        status.textContent = 'Could not open about:blank due to a browser restriction.';
      }
    });
  </script>
</body>
</html>
